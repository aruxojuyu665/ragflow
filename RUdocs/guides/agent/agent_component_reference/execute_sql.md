---
sidebar_position: 25
slug: /execute_sql
---

# Инструмент Execute SQL

Инструмент, который выполняет SQL-запросы к указанной реляционной базе данных.

---

Инструмент **Execute SQL** позволяет подключаться к реляционной базе данных и выполнять SQL-запросы, введённые напрямую или сгенерированные с помощью возможности Text2SQL через компонент **Agent**.

## Требования

- Экземпляр базы данных, правильно настроенный и запущенный.
- База данных должна быть одного из следующих типов:
  - MySQL
  - PostgreSQL
  - MariaDB
  - Microsoft SQL Server

## Примеры

Вы можете связать компонент **Agent** с инструментом **Execute SQL**, при этом **Agent** генерирует SQL-запросы, а инструмент **Execute SQL** отвечает за подключение к базе данных и выполнение запросов. Пример такой настройки приведён в шаблоне агента **SQL Assistant**, показанном ниже:

![](https://raw.githubusercontent.com/infiniflow/ragflow-docs/main/images/exeSQL.jpg)

## Конфигурации

### SQL-запрос

Это текстовое поле позволяет писать статические SQL-запросы, например `SELECT * FROM my_table`, а также динамические SQL-запросы с использованием переменных.

:::tip ПРИМЕЧАНИЕ
Нажмите **(x)** или введите `/` для вставки переменных.
:::

Для динамических SQL-запросов вы можете включать переменные в ваши SQL-запросы, например `SELECT * FROM /sys.query`; если компонент **Agent** связан с инструментом **Execute SQL** для генерации SQL-заданий (см. раздел [Примеры](#примеры)), вы можете напрямую вставлять вывод этого **Agent** — переменную `content` — в это поле.

### Тип базы данных

Поддерживаемый тип базы данных. В настоящее время доступны следующие типы баз данных:

- MySQL
- PostgreSQL
- MariaDB
- Microsoft SQL Server (Myssql)

### База данных

Отображается только при выборе метода **Split**.

### Имя пользователя

Имя пользователя с правами доступа к базе данных.

### Хост

IP-адрес сервера базы данных.

### Порт

Номер порта, на котором слушает сервер базы данных.

### Пароль

Пароль пользователя базы данных.

### Максимальное количество записей

Максимальное количество записей, возвращаемых SQL-запросом, для контроля размера ответа и повышения эффективности. По умолчанию `1024`.

### Вывод

Инструмент **Execute SQL** предоставляет две выходные переменные:

- `formalized_content`: строка. Если вы ссылаетесь на эту переменную в компоненте **Message**, возвращённые записи отображаются в виде таблицы.
- `json`: массив объектов. Если вы ссылаетесь на эту переменную в компоненте **Message**, возвращённые записи будут представлены в виде пар ключ-значение.