---
sidebar_position: 7
slug: /iteration_component
---

# Компонент Iteration

Компонент, который разбивает текстовый ввод на текстовые сегменты и выполняет заранее определённый workflow (рабочий процесс) для каждого из них.

---

**Interaction** (Взаимодействующий) компонент может разделять текстовый ввод на текстовые сегменты и применять встроенный workflow компонента к каждому сегменту.

## Сценарий

**Iteration** (Итерационный) компонент необходим, когда требуется цикл workflow, и количество итераций *не* фиксировано, а зависит от числа сегментов, созданных на выходе определённых компонентов агента.

- Например, если вы планируете передать несколько абзацев в LLM для генерации контента, каждый с собственной тематикой, и передача их в LLM одновременно может вызвать путаницу или противоречия, тогда вы можете использовать **Iteration** компонент, который инкапсулирует **Generate** компонент, чтобы повторять процесс генерации контента для каждого абзаца.
- Другой пример: если вы хотите использовать LLM для перевода длинной статьи на целевой язык, не превышая лимит токенов, рассмотрите возможность использования **Iteration** компонента, инкапсулирующего **Generate** компонент, чтобы разбить статью на более мелкие части и повторять процесс перевода для каждой из них.

## Внутренние компоненты

### IterationItem

Каждый **Iteration** компонент включает внутренний компонент **IterationItem**. Компонент **IterationItem** служит как начальной точкой, так и входным узлом workflow внутри **Iteration** компонента. Он управляет циклом workflow для всех текстовых сегментов, созданных из входных данных.

:::tip NOTE
Компонент **IterationItem** виден *только* компонентам, инкапсулированным текущим **Iteration** компонентом.
:::

### Построение внутреннего workflow

Вы можете добавлять другие компоненты внутрь **Iteration** компонента для построения внутреннего workflow, и эти «добавленные внутренние компоненты» больше не видны компонентам вне текущего **Iteration** компонента.

:::danger IMPORTANT
Чтобы ссылаться на созданные текстовые сегменты из добавленного внутреннего компонента, просто добавьте переменную **Reference**, равную **IterationItem**, в разделе **Input** этого внутреннего компонента. Нет необходимости ссылаться на соответствующий внешний компонент, так как компонент **IterationItem** управляет циклом workflow для всех созданных текстовых сегментов.
:::

:::tip NOTE
Добавленный внутренний компонент может ссылаться на внешний компонент при необходимости.
:::

## Конфигурации

### Ввод

**Iteration** компонент использует входные переменные для указания своих входных данных, а именно текстов для сегментации. Вы можете указать несколько источников входных данных для **Iteration** компонента. Нажмите **+ Add variable** в разделе **Input**, чтобы добавить необходимые входные переменные. Существует два типа входных переменных: **Reference** и **Text**.

- **Reference**: Использует вывод компонента или пользовательский ввод в качестве источника данных. Требуется выбрать из выпадающего меню:
  - ID компонента в разделе **Component Output**, или
  - глобальную переменную в разделе **Begin input**, которая определена в компоненте **Begin**.
- **Text**: Использует фиксированный текст в качестве запроса. Требуется ввести статический текст.

### Разделитель

Разделитель, используемый для разбиения текстового ввода на сегменты:

- Запятая (по умолчанию)
- Перевод строки
- Табуляция
- Подчёркивание
- Прямой слэш
- Дефис
- Точка с запятой