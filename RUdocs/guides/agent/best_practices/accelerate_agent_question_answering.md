---
sidebar_position: 1
slug: /accelerate_agent_question_answering
---

# Ускорение ответа

Контрольный список для ускорения ответа на вопросы.

---

Обратите внимание, что некоторые ваши настройки могут занимать значительное время. Если вы часто сталкиваетесь с тем, что ответ на вопрос занимает много времени, вот контрольный список для рассмотрения:

## Балансируйте сложность задачи с производительностью и скоростью Агента

Время отклика Агента обычно зависит от многих факторов, например, возможностей LLM (Large Language Model — большая языковая модель) и prompt (запроса), последний отражает сложность задачи. При использовании Агента всегда следует балансировать требования задачи и возможности LLM.

- Для простых задач, таких как поиск, переписывание, форматирование или извлечение структурированных данных, используйте краткие prompt, убирайте инструкции по планированию или рассуждению, задавайте ограничения на длину вывода и выбирайте модели меньшего размера или класса Turbo. Это значительно снижает задержки и затраты при минимальном влиянии на качество.

- Для сложных задач, таких как многошаговое рассуждение, синтез информации из нескольких документов или рабочие процессы с использованием инструментов, сохраняйте или улучшайте prompt, включающие этапы планирования, рефлексии и проверки.

- В системах с оркестрацией нескольких Агентов делегируйте простые подзадачи суб-Агентам с использованием меньших и более быстрых моделей, а более мощные модели оставляйте для ведущего Агента, который справляется со сложностью и неопределённостью.

:::tip КЛЮЧЕВОЕ ПОНИМАНИЕ
Сосредоточьтесь на минимизации количества выходных токенов — через суммирование, маркированные списки или явные ограничения длины — так как это оказывает гораздо большее влияние на снижение задержек, чем оптимизация размера входных данных.
:::

## Отключите рассуждение

Отключение переключателя **Reasoning** уменьшит время "размышления" LLM. Для модели, такой как Qwen3, также необходимо добавить `/no_think` в системный prompt для отключения рассуждения.

## Отключите модель повторной ранжировки (Rerank model)

- Оставление поля **Rerank model** пустым (в соответствующем компоненте **Retrieval**) значительно сократит время поиска.
- При использовании модели повторной ранжировки убедитесь, что у вас есть GPU для ускорения; в противном случае процесс повторной ранжировки будет *чрезвычайно* медленным.

:::tip ПРИМЕЧАНИЕ
Обратите внимание, что модели повторной ранжировки необходимы в определённых сценариях. Всегда существует компромисс между скоростью и производительностью; вам нужно взвесить плюсы и минусы для вашего конкретного случая.
:::

## Проверьте время выполнения каждой задачи

Нажмите на иконку лампочки над *текущим* диалогом и прокрутите всплывающее окно вниз, чтобы увидеть время выполнения каждой задачи:

| Название элемента | Описание                                                                                     |
| ----------------- | -------------------------------------------------------------------------------------------- |
| Total             | Общее время, затраченное на этот раунд разговора, включая поиск чанков и генерацию ответа.  |
| Check LLM         | Время проверки указанной LLM.                                                                |
| Create retriever  | Время создания поискового механизма для чанков.                                              |
| Bind embedding    | Время инициализации экземпляра модели embedding.                                            |
| Bind LLM          | Время инициализации экземпляра LLM.                                                         |
| Tune question     | Время оптимизации пользовательского запроса с учётом контекста многошагового диалога.        |
| Bind reranker     | Время инициализации модели повторной ранжировки для поиска чанков.                           |
| Generate keywords | Время извлечения ключевых слов из пользовательского запроса.                                |
| Retrieval         | Время поиска чанков.                                                                         |
| Generate answer   | Время генерации ответа.                                                                      |