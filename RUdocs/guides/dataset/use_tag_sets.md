---
sidebar_position: 6
slug: /use_tag_sets
---

# Использование набора тегов

Используйте набор тегов для автоматического тегирования чанков (фрагментов) в ваших наборах данных.

---

Точность поиска является краеугольным камнем для готовой к производству RAG (Retrieval-Augmented Generation) системы. Помимо подходов, улучшающих поиск, таких как авто-ключевые слова, авто-вопросы и граф знаний, RAGFlow вводит функцию авто-тегирования для устранения семантических пробелов. Функция авто-тегирования автоматически сопоставляет теги из пользовательских наборов тегов с релевантными чанками в вашем наборе данных на основе сходства с каждым чанком. Этот механизм автоматизации позволяет применить дополнительный «слой» предметных знаний к существующим наборам данных, что особенно полезно при работе с большим количеством чанков.

Для использования этой функции убедитесь, что у вас есть хотя бы один правильно настроенный набор тегов, укажите набор(ы) тегов на странице **Configuration** вашего набора данных, а затем повторно проанализируйте документы, чтобы запустить процесс авто-тегирования. В ходе этого процесса каждый чанк вашего набора данных сравнивается с каждой записью в указанных наборах тегов, и теги автоматически применяются на основе сходства.

## Сценарии

Авто-тегирование применяется в ситуациях, когда чанки настолько похожи друг на друга, что нужные чанки невозможно отличить от остальных. Например, если у вас есть несколько чанков о iPhone и большинство о чехлах или аксессуарах для iPhone, становится сложно извлечь именно те чанки, которые касаются iPhone, без дополнительной информации.

## 1. Создание набора тегов

Вы можете рассматривать набор тегов как замкнутое множество, и теги, которые будут прикреплены к чанкам в вашем наборе данных, берутся *исключительно* из указанного набора тегов. Набор тегов используется для «информирования» RAGFlow, какие чанки тегировать и какие теги применять.

### Подготовка файла таблицы тегов

Набор тегов может состоять из одного или нескольких файлов таблиц в форматах XLSX, CSV или TXT. Каждый файл таблицы в наборе тегов содержит два столбца: **Description** и **Tag**:

- Первый столбец содержит описания тегов, перечисленных во втором столбце. Эти описания могут быть примерными чанками или примерными запросами. Сходство будет вычисляться между каждой записью в этом столбце и каждым чанком вашего набора данных.
- Столбец **Tag** включает теги, соответствующие записям описания. Несколько тегов должны быть разделены запятой (,).

:::tip ПРИМЕЧАНИЕ
В качестве практического совета рассмотрите возможность включения в таблицу тегов следующих записей:

- Описания целевых чанков вместе с соответствующими тегами.
- Пользовательские запросы, которые не удаётся корректно обработать другими методами, при этом их теги должны соответствовать целевым чанкам в вашем наборе данных.
:::

### Создание набора тегов

:::danger ВАЖНО
Набор тегов *не* участвует в индексировании документов или процессе поиска. Не указывайте набор тегов при настройке вашего чат-ассистента или агента.
:::

1. Нажмите **+ Create dataset** для создания набора данных.
2. Перейдите на страницу **Configuration** созданного набора данных, выберите **Built-in** в разделе **Ingestion pipeline**, затем выберите **Tag** в качестве метода разбиения на чанки по умолчанию из выпадающего меню **Built-in**.
3. Вернитесь на страницу **Files** и загрузите, затем проанализируйте ваш файл таблицы в форматах XLSX, CSV или TXT.  
   _Под разделом **Tag view** появится облако тегов, указывающее на создание набора тегов:_  
   ![Изображение](https://github.com/user-attachments/assets/abefbcbf-c130-4abe-95e1-267b0d2a0505)
4. Нажмите вкладку **Table**, чтобы просмотреть таблицу частоты тегов:  
   ![Изображение](https://github.com/user-attachments/assets/af91d10c-5ea5-491f-ab21-3803d5ebf59f)

## 2. Тегирование чанков

После создания набора тегов вы можете применить его к вашему набору данных:

1. Перейдите на страницу **Configuration** вашего набора данных.
2. Выберите набор тегов из выпадающего списка **Tag sets** и нажмите **Save** для подтверждения.

:::tip ПРИМЕЧАНИЕ
Если набор тегов отсутствует в списке, проверьте, что он был создан и настроен корректно.
:::

3. Повторно проанализируйте ваши документы, чтобы запустить процесс авто-тегирования.  
   _В сценарии AI-чата с использованием авто-тегированных наборов данных каждый запрос будет тегирован соответствующим набором тегов, и чанки с этими тегами будут иметь более высокий приоритет при извлечении._

## 3. Обновление набора тегов

Создание набора тегов — это *не* одноразовая операция. Часто возникает необходимость обновлять или удалять существующие теги, а также добавлять новые записи.

- Вы можете обновить существующий набор тегов в таблице частоты тегов.
- Для добавления новых записей можно загрузить и проанализировать новые файлы таблиц в форматах XLSX, CSV или TXT.

### Обновление набора тегов в таблице частоты тегов

1. Перейдите на страницу **Configuration** вашего набора тегов.
2. Нажмите вкладку **Table** в разделе **Tag view**, чтобы просмотреть таблицу частоты тегов, где вы можете обновить имена тегов или удалить теги.

:::danger ВАЖНО
После обновления набора тегов необходимо повторно проанализировать документы в вашем наборе данных, чтобы теги были обновлены соответствующим образом.
:::

### Добавление новых файлов таблиц

1. Перейдите на страницу **Configuration** вашего набора тегов.
2. Перейдите на страницу **Dataset** и загрузите, затем проанализируйте ваш файл таблицы в форматах XLSX, CSV или TXT.

:::danger ВАЖНО
Если вы добавляете новые файлы таблиц в набор тегов, решение о повторном анализе документов в ваших наборах данных принимается вами самостоятельно.
:::

## Часто задаваемые вопросы

### Можно ли использовать более одного набора тегов?

Да, можно. Обычно одного набора тегов достаточно. При использовании нескольких наборов тегов убедитесь, что они независимы друг от друга; в противном случае рассмотрите возможность объединения наборов тегов.

### В чем разница между набором тегов и стандартным набором данных?

Стандартный набор данных — это набор данных, который будет просматриваться движком документов RAGFlow, и извлечённые чанки будут переданы LLM (Large Language Model). В отличие от этого, набор тегов используется исключительно для прикрепления тегов к чанкам внутри вашего набора данных. Он не участвует напрямую в процессе поиска, и вы не должны выбирать набор тегов при выборе наборов данных для вашего чат-ассистента или агента.

### В чем разница между авто-тегированием и авто-ключевыми словами?

Обе функции улучшают поиск в RAGFlow. Функция авто-ключевых слов основана на LLM и потребляет значительное количество токенов, тогда как функция авто-тегов базируется на векторном сходстве и заранее определённых наборах тегов. Ключевые слова, применяемые в функции авто-ключевых слов, можно рассматривать как открытое множество, поскольку они генерируются LLM. В отличие от этого, набор тегов можно считать пользовательским замкнутым множеством, требующим загрузки наборов тегов в указанных форматах перед использованием.